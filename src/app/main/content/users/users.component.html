<div class="users-wrapper">
    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutWrap class="action-btns">
        <div>
            <button mat-raised-button class="my-12" color="accent">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon>mail</mat-icon>
                    <span>New Message</span>
                </div>
            </button>
            <button mat-raised-button class="my-12" color="accent">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon>assignment</mat-icon>
                    <span>Assign Reports</span>
                </div>
            </button>
        </div>
        <div>
            <button mat-raised-button class="my-12" color="accent">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon>add_to_photos</mat-icon>
                    <span>Export</span>
                </div>
            </button>
            <button mat-raised-button class="my-12" color="accent">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon>contact_mail</mat-icon>
                    <span>Email Showcase</span>
                </div>
            </button>
            <button mat-raised-button class="my-12" color="accent">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon>contact_mail</mat-icon>
                    <span>Add to presentation</span>
                </div>
            </button>
            <button mat-raised-button class="my-12" color="accent">
                <div fxLayout="row" fxLayoutAlign="start center">
                    <mat-icon>perm_contact_calendar</mat-icon>
                    <span>Add to submission</span>
                </div>
            </button>
        </div>
    </div>
    <div *ngIf="users">
        <ngx-datatable
            class="material striped"
            [rows]="users"
            [loadingIndicator]="loadingIndicator"
            [columnMode]="'force'"
            [headerHeight]="48"
            [footerHeight]="56"
            [rowHeight]="'auto'"
            [scrollbarH]="true"
            [selectionType]="'multiClick'"
            [selected]="selectedUsers"
            [reorderable]="reorderable"
            [limit]="10"
            (select)="onSelect($event)"
            (activate)="onActivate($event)">
                <ng-container *ngFor="let column of columns">
                    <ngx-datatable-column
                        *ngIf="column.key_name != 'id'"
                        name="{{column.display_name}}"
                        prop="{{column.key_name}}"
                        >
                        <ng-template *ngIf="column.key_name == 'ppic_a'" let-row="row" let-value="value" ngx-datatable-cell-template>
                            <span [matMenuTriggerFor]="contextMenu">
                            <img class="avatar" [src]="getAvatar(value)" (click)="openUserTab(row, $event)" (contextmenu)="openContextMenu($event)"/>
                            <mat-menu #contextMenu="matMenu">
                                <button mat-menu-item>
                                    <mat-icon>vpn_key</mat-icon>
                                    <span>Login as user</span>
                                </button>
                                <button mat-menu-item [matMenuTriggerFor]="typeMenu">
                                    <mat-icon>shuffle</mat-icon>
                                    <span>Change type</span>
                                </button>
                                <button mat-menu-item>
                                    <mat-icon>vpn_key</mat-icon>
                                    <span>Change password</span>
                                </button>
                            </mat-menu>

                            <mat-menu #typeMenu="matMenu">
                                <button mat-menu-item>Owner</button>
                                <button mat-menu-item>Administrator</button>
                                <button mat-menu-item>Supervisor</button>
                                <button mat-menu-item>Staff</button>
                                <button mat-menu-item>Inactive</button>
                                <button mat-menu-item>Blacklisted</button>
                            </mat-menu>
                            </span>
                        </ng-template>
                        <ng-template *ngIf="column.key_name =='fav'" let-row="row" let-value="value" ngx-datatable-cell-template>
                            <div class="" fxLayout="row" fxLayoutAlign="start center">
                                <button mat-icon-button (click)="toggleFav(row, $event)">
                                    <mat-icon [class.amber-600-fg]="value == 1">star</mat-icon>
                                </button>
                            </div>
                        </ng-template>
                    </ngx-datatable-column>
                </ng-container>
                
        </ngx-datatable>
    </div>
</div>
