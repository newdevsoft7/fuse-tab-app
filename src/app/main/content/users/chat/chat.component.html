<div id="chat" class="page-layout carded fullwidth">

    <!-- TOP BACKGROUND -->
    <div class="top-bg mat-accent-bg"></div>
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center">

        <!-- CONTENT CARD -->
        <div class="content-card">

            <mat-sidenav-container>

                <!-- LEFT SIDENAV -->
                <mat-sidenav class="sidenav" align="start" opened="true" mode="side"
                             fuseMatSidenavHelper="chat-left-sidenav" mat-is-locked-open="gt-md">
                    <fuse-chat-left-sidenav 
                        [users]="users"
                        [threads]="threads"
                        (fetchChat)="fetchChatByThread($event)"
                        (searchUsers)="searchUsers($event)"
                        (addContact)="addContact($event)"></fuse-chat-left-sidenav>
                </mat-sidenav>
                <!-- / LEFT SIDENAV -->

                <!-- CONTENT -->
                <mat-sidenav-content>
                    <fuse-chat-view
                        *ngIf="selectedChat; else chatStartBlock" 
                        [messages]="selectedChat" 
                        [thread]="selectedThread"
                        [replyMessage]="pendingMessages[selectedThread?.id]"
                        [typingUsers]="typingUsers"
                        [paginationDisabled]="paginationDisabled"
                        (sendMessage)="sendMessage($event)"
                        (updateReadStatus)="updateReadStatus($event)"
                        (addUser)="triggerAddUserModal($event)"
                        (updatePendingMessage)="updatePendingMessage($event)"
                        (updateTypingStatus)="updateTypingStatus($event)"
                        (fetchMessages)="fetchMessages($event)"
                        (renameThread)="triggerRenameThreadModal($event)"
                        (removeUser)="removeUser($event)"></fuse-chat-view>
                    <ng-template #chatStartBlock>
                        <fuse-chat-start></fuse-chat-start>
                    </ng-template>
                </mat-sidenav-content>
                <!-- / CONTENT -->

            </mat-sidenav-container>

        </div>
        <!-- / CONTENT CARD -->

    </div>
    <!-- / CENTER -->

</div>
