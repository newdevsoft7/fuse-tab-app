<div class="page-layout simple left-sidenav inner-sidenav" fusePerfectScrollbar>

    <button mat-button class="mat-accent new-client-form-button" mat-fab (click)="openForm()">
        <mat-icon>add</mat-icon>
    </button>

    <mat-sidenav-container>

        <!-- SIDENAV -->
        <mat-sidenav class="sidenav" align="start" opened="true" mode="side" fuseMatSidenavHelper="simple-left-sidenav-3" mat-is-locked-open="gt-md"
            #sidenav>

            <div class="sidenav-content nav pt-16" fusePerfectScrollbar>
                <div class="nav-item" *ngFor="let client of clients">

                    <div class="nav-link" matRipple (click)="changeClient(client)" [ngClass]="{'active': selectedClient && client.id === selectedClient.id }"
                        fxLayout="row" fxLayoutAlign="space-between center">
                        <span>{{client.cname}}</span>
                    </div>

                    <mat-divider></mat-divider>
                </div>

            </div>

        </mat-sidenav>
        <!-- / SIDENAV -->

        <!-- CENTER -->
        <div class="center p-16" fusePerfectScrollbar>

            <!-- CONTENT -->
            <div class="content mat-elevation-z4 mat-white-bg">
                <mat-tab-group *ngIf="selectedClient" class="w-100-p">
                    <mat-tab label="Home Screen">
                      <app-timeline [lvl]="'client'" [otherId]="selectedClient.id"></app-timeline>
                    </mat-tab>
                    <mat-tab label="Info">
                      <div fxLayout="row" fxLayoutWrap class="p-16">
                        <div fxFlex.lt-lg="100" class="ml-4 mt-4">
                          <header class="mat-accent-bg p-16">
                              <div class="title font-size-16">Basic Information</div>
                          </header>
                          <form class="bordered-box" #clientForm="ngForm" novalidate>
                            <app-editable-text class="title" [value]="clientInfo.cname" (saveChange)="updateData($event, 'cname')"></app-editable-text>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              Website: <app-editable-text class="ml-12" [value]="clientInfo.web" (saveChange)="updateData($event, 'web')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              Phone: <app-editable-text class="ml-12" [value]="clientInfo.phone" (saveChange)="updateData($event, 'phone')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              Invoice To: <app-editable-text class="ml-12" [value]="clientInfo.invoice_to" (saveChange)="updateData($event, 'invoice_to')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              Address: <app-editable-text class="ml-12" [value]="clientInfo.address" (saveChange)="updateData($event, 'address')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              City: <app-editable-text class="ml-12" [value]="clientInfo.city" (saveChange)="updateData($event, 'city')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              State: <app-editable-text class="ml-12" [value]="clientInfo.state" (saveChange)="updateData($event, 'state')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              PostCode: <app-editable-text class="ml-12" [value]="clientInfo.postcode" (saveChange)="updateData($event, 'postcode')"></app-editable-text>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                              Unit: <app-editable-text class="ml-12" [value]="clientInfo.unit" (saveChange)="updateData($event, 'unit')"></app-editable-text>
                            </div>
                            <button mat-raised-button color="warn" class="mt-8" (click)="deleteSelectedClient()">DELETE</button>
                          </form>
                        </div>
                        <div fxFlex="30" fxFlex.lt-lg="100" class="mr-4 mt-4 ml-16">
                          <form class="bordered-box" #adminNoteForm="ngForm" novalidate fxLayout="column">
                              <mat-form-field class="mb-4" floatPlaceholder="never">
                                  <textarea matInput placeholder="Write an admin note..." #adminNoteInput="ngModel" name="note" [(ngModel)]="post.note" required></textarea>
                              </mat-form-field>
                              <button mat-raised-button (click)="onPostAdminNote()" class="save-button mat-accent" [disabled]="adminNoteForm.invalid" aria-label="POST">
                                  POST
                              </button>
                          </form>
                        </div>
                      </div>
                    </mat-tab>
                </mat-tab-group>
            </div>
            <!-- / CONTENT -->

        </div>
        <!-- / CENTER -->
    </mat-sidenav-container>

</div>
