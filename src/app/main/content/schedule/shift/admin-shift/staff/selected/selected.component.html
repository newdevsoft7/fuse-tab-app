<div id="admin-shift-staff-selected">

    <div class="p-24" *ngIf="staffs.length === 0">
        No selected staffs
    </div>
    <div class="person" *ngFor="let staff of staffs">
        <div class="main-info" >
            <div fxLayout="row" fxLayoutAlign="start center">
                <div class="savatar pr-12" fxLayout="row" fxLayoutAlign="start center">
                    <img [src]="getAvatar(staff.ppic_a)" (click)="openUser(staff, $event)"
                        [ngStyle]="{'border': '3px solid ' + staff.staff_status.border_color}"
                        [matTooltip]="staff.staff_status.status" />
                    <span>{{staff.name}}</span>
                </div>

                <div class="check-in-out px-12">

                </div>

                <div class="times-break px-12">
                    <app-admin-shift-edit-time [staff]="staff" (onTimeChanged)="onTimeChanged($event, staff)"
                        [editable]="editable"></app-admin-shift-edit-time>
                    <app-admin-shift-edit-break [staff]="staff" [editable]="editable"
                        (onBreakChanged)="OnBreakChanged($event, staff)">
                    </app-admin-shift-edit-break>
                </div>

                <div class="pay-rate px-12">
                    <app-admin-shift-edit-payitems [staff]="staff" [editable]="editable"
                        (onPayItemsChanged)="onPayItemsChanged($event, staff)">
                    </app-admin-shift-edit-payitems>
                </div>

                <div class="total px-12">
                    {{staff.pay_items_total | currency}}
                </div>

                <div class="expand-button">
                    <button mat-icon-button (click)="togglePayItemsView(staff)" matTooltip="Show / hide pay items">
                        <mat-icon>
                            {{staff.pay_items_show ? 'arrow_drop_up' : 'arrow_drop_down'}}
                        </mat-icon>
                    </button>
                </div>

                <div class="action-button">
                    <button mat-icon-button [matMenuTriggerFor]="menu" [disabled]="editable !== 1">
                        <mat-icon class="material-icons">more_vert</mat-icon>
                    </button>

                    <mat-menu #menu="matMenu">
                        <button mat-menu-item>
                            <mat-icon>mail_outline</mat-icon>
                            <span>Send Message</span>
                        </button>
                    
                        <button mat-menu-item>
                            <mat-icon>vpn_key</mat-icon>
                            <span>Login as user</span>
                        </button>
                    
                        <button mat-menu-item>
                            <mat-icon>event_note</mat-icon>
                            <span>View Calender</span>
                        </button>
                    
                        <button mat-menu-item>
                            <mat-icon>refresh</mat-icon>
                            <span>Force re-confirmation</span>
                        </button>
                    
                        <button mat-menu-item [matMenuTriggerFor]="statusMenu">
                            <mat-icon>edit</mat-icon>
                            <span>Change Status</span>
                        </button>
                    
                        <button mat-menu-item (click)="toggleTeamLeader(staff)">
                            <mat-icon>person</mat-icon>
                            <span>Toggle Leader</span>
                        </button>

                        <button mat-menu-item (click)="addPayItem(staff)">
                            <mat-icon>add</mat-icon>
                            Add Pay Item
                        </button>
                    
                        <button mat-menu-item>
                            <mat-icon>person</mat-icon>
                            <span>Add to presentation</span>
                        </button>
                    
                        <button mat-menu-item>
                            <mat-icon>person</mat-icon>
                            <span>Add to submission</span>
                        </button>
                    
                    
                        <button mat-menu-item>
                            <mat-icon>clear</mat-icon>
                            <span>Remove</span>
                        </button>
                    
                        <button mat-menu-item>
                            <mat-icon>clear</mat-icon>
                            <span>Remove (edit email)</span>
                        </button>
                    </mat-menu>
                    
                    <mat-menu #statusMenu="matMenu">
                    
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_APPLIED')">Applied</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_STANDBY')">Standby</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_SELECTED')">Selected</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_INVITED')">Invited</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_CONFIRMED')">Confirmed</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_CHECKED_IN')">Checked In</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_CHECKED_OUT')">Checked Out</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_COMPLETED')">Completed</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_INVOICED')">Invoiced</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_PAID')">Paid</button>
                        <button mat-menu-item (click)="changeStatus(staff, 'STAFF_STATUS_NO_SHOW')">No Show</button>
                        <button mat-menu-item>No Pay</button>
                        <button mat-menu-item>Other</button>
                    
                    </mat-menu>
                </div>
            </div>
            <div class="additional-info" *ngIf="staff.pay_items_show">
                <div *ngIf="staff.pay_items.length > 0; else noPayItems">
                    <div class="item-line" *ngFor="let item of staff.pay_items"
                        fxLayout="row" fxLayoutAlign="start center">
                        <div fxFlex="20%">
                            {{item.item_type | capitalize}}
                        </div>
                        <div fxFlex="20%">
                            <app-admin-shift-edit-pay-item-name
                                [staff]="staff" [payItem]="item" [editable]="editable">
                            </app-admin-shift-edit-pay-item-name>
                        </div>
                        <div fxFlex="20%">
                            <app-admin-shift-edit-pay-item-units
                                [staff]="staff" [payItem]="item" [editable]="editable"
                                (onItemChanged)="recalcuatePayItemsTotal(staff)">
                            </app-admin-shift-edit-pay-item-units>
                        </div>
                        <div fxFlex="20%">
                            <app-admin-shift-edit-pay-item-unit-rate
                                [staff]="staff" [payItem]="item" [editable]="editable"
                                (onItemChanged)="recalcuatePayItemsTotal(staff)">
                            </app-admin-shift-edit-pay-item-unit-rate>
                        </div>
                        <div fxFlex="10%">
                            <button mat-icon-button *ngIf="item.item_type === 'expense'" class="pull-right" matTooltip="View / Upload receipt">
                                <mat-icon>add</mat-icon>
                            </button>
                        </div>

                        <div fxFlex="10%">
                            <button mat-icon-button (click)="removePayItem(staff, item)" class="pull-right" matTooltip="Delete">
                                <mat-icon>close</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
                <ng-template #noPayItems>
                        No pay items.
                    <a class="add-payitem-link" (click)="addPayItem(staff)">Add</a>
                </ng-template>
            </div>
        </div>
    </div>

</div>
